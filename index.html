
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oloo - Stay Connected</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --sky-blue: #87CEEB;
            --deep-sky: #00BFFF;
            --light-sky: #E0F6FF;
            --gold: #FFD700;
            --dark-text: #2C3E50;
            --white: #FFFFFF;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--sky-blue) 0%, var(--deep-sky) 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            height: 90vh;
            max-height: 800px;
        }

        /* Auth Screen */
        .auth-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 40px;
            height: 100%;
            background: linear-gradient(135deg, var(--light-sky) 0%, var(--sky-blue) 100%);
        }

        .logo {
            width: 120px;
            height: 120px;
            background: linear-gradient(135deg, var(--deep-sky), var(--sky-blue));
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 64px;
            font-weight: bold;
            color: white;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .app-name {
            font-size: 48px;
            font-weight: bold;
            color: var(--deep-sky);
            margin-bottom: 10px;
        }

        .tagline {
            font-size: 18px;
            color: var(--dark-text);
            margin-bottom: 40px;
            text-align: center;
        }

        .auth-form {
            width: 100%;
            max-width: 400px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--dark-text);
            font-weight: 600;
        }

        .input-group input {
            width: 100%;
            padding: 15px;
            border: 2px solid var(--sky-blue);
            border-radius: 10px;
            font-size: 16px;
            transition: border 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--deep-sky);
        }

        .btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--deep-sky), var(--sky-blue));
            color: white;
            margin-bottom: 10px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,191,255,0.4);
        }

        .btn-secondary {
            background: transparent;
            color: var(--deep-sky);
            border: 2px solid var(--deep-sky);
        }

        .btn-secondary:hover {
            background: var(--light-sky);
        }

        /* Main App Layout */
        .app-container {
            display: none;
            height: 100%;
            flex-direction: row;
        }

        .app-container.active {
            display: flex;
        }

        /* Sidebar */
        .sidebar {
            width: 350px;
            background: var(--light-sky);
            border-right: 1px solid #ddd;
            display: flex;
            flex-direction: column;
        }

        .sidebar-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--deep-sky), var(--sky-blue));
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .user-profile {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: white;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: var(--deep-sky);
        }

        .header-actions {
            display: flex;
            gap: 15px;
        }

        .icon-btn {
            background: transparent;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .icon-btn:hover {
            transform: scale(1.2);
        }

        .search-bar {
            padding: 15px;
            background: white;
        }

        .search-bar input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--sky-blue);
            border-radius: 25px;
            font-size: 14px;
        }

        .contacts-list {
            flex: 1;
            overflow-y: auto;
        }

        .contact-item {
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            cursor: pointer;
            transition: background 0.2s;
            border-bottom: 1px solid #e0e0e0;
        }

        .contact-item:hover {
            background: white;
        }

        .contact-item.active {
            background: white;
            border-left: 4px solid var(--deep-sky);
        }

        .contact-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--sky-blue);
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            color: white;
        }

        .contact-info {
            flex: 1;
        }

        .contact-name {
            font-weight: 600;
            color: var(--dark-text);
            margin-bottom: 5px;
        }

        .contact-message {
            font-size: 14px;
            color: #666;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .contact-time {
            font-size: 12px;
            color: #999;
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #4CAF50;
            position: relative;
            top: -10px;
            left: -15px;
        }

        /* Chat Area */
        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: white;
        }

        .chat-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--deep-sky), var(--sky-blue));
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .chat-actions {
            display: flex;
            gap: 20px;
        }

        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #F5F5DC;
            position: relative;
        }

        .hieroglyphic-bg {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            opacity: 0.05;
            font-size: 40px;
            line-height: 60px;
            overflow: hidden;
            pointer-events: none;
            z-index: 0;
        }

        .ankh-symbol {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 200px;
            opacity: 0.03;
            color: var(--gold);
        }

        .messages {
            position: relative;
            z-index: 1;
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            animation: slideIn 0.3s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.sent {
            justify-content: flex-end;
        }

        .message-bubble {
            max-width: 60%;
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
        }

        .message.received .message-bubble {
            background: white;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .message.sent .message-bubble {
            background: linear-gradient(135deg, var(--deep-sky), var(--sky-blue));
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message-text {
            margin-bottom: 5px;
        }

        .message-time {
            font-size: 11px;
            opacity: 0.7;
            text-align: right;
        }

        .message-input-container {
            padding: 20px;
            background: white;
            border-top: 1px solid #ddd;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .message-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid var(--sky-blue);
            border-radius: 25px;
            font-size: 16px;
            font-family: inherit;
        }

        .message-input:focus {
            outline: none;
            border-color: var(--deep-sky);
        }

        .send-btn {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--deep-sky), var(--sky-blue));
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.2s;
        }

        .send-btn:hover {
            transform: scale(1.1);
        }

        /* Welcome Screen */
        .welcome-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            background: var(--light-sky);
        }

        .welcome-logo {
            width: 150px;
            height: 150px;
            background: linear-gradient(135deg, var(--deep-sky), var(--sky-blue));
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 80px;
            color: white;
            margin-bottom: 30px;
        }

        .welcome-text {
            font-size: 24px;
            color: var(--dark-text);
            text-align: center;
            max-width: 500px;
        }

        .features {
            margin-top: 30px;
            display: flex;
            gap: 30px;
        }

        .feature {
            text-align: center;
        }

        .feature-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .feature-text {
            font-size: 14px;
            color: var(--dark-text);
        }

        /* Call Modal */
        .call-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .call-modal.active {
            display: flex;
        }

        .call-content {
            text-align: center;
            color: white;
        }

        .call-avatar {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            background: var(--sky-blue);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 60px;
            margin: 0 auto 30px;
        }

        .call-name {
            font-size: 32px;
            margin-bottom: 10px;
        }

        .call-status {
            font-size: 18px;
            margin-bottom: 50px;
            color: #ccc;
        }

        .call-actions {
            display: flex;
            gap: 30px;
            justify-content: center;
        }

        .call-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            border: none;
            font-size: 30px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .call-btn:hover {
            transform: scale(1.1);
        }

        .call-btn.end {
            background: #f44336;
            color: white;
        }

        .call-btn.mute {
            background: #666;
            color: white;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                display: none;
            }

            .sidebar.mobile-active {
                display: flex;
            }

            .chat-area {
                display: none;
            }

            .chat-area.mobile-active {
                display: flex;
            }

            .app-container {
                flex-direction: column;
            }
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--sky-blue);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--deep-sky);
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Authentication Screen -->
        <div class="auth-screen" id="authScreen">
            <div class="logo">O</div>
            <div class="app-name">Oloo</div>
            <div class="tagline">Stay Connected - Even Without Data</div>
            
            <div class="auth-form">
                <div id="loginForm">
                    <div class="input-group">
                        <label>Phone Number</label>
                        <input type="tel" id="loginPhone" placeholder="+254 700 000 000">
                    </div>
                    <div class="input-group">
                        <label>Password</label>
                        <input type="password" id="loginPassword" placeholder="Enter your password">
                    </div>
                    <button class="btn btn-primary" onclick="login()">Login</button>
                    <button class="btn btn-secondary" onclick="showSignup()">Create Account</button>
                </div>

                <div id="signupForm" style="display: none;">
                    <div class="input-group">
                        <label>Full Name</label>
                        <input type="text" id="signupName" placeholder="John Doe">
                    </div>
                    <div class="input-group">
                        <label>Phone Number</label>
                        <input type="tel" id="signupPhone" placeholder="+254 700 000 000">
                    </div>
                    <div class="input-group">
                        <label>Password</label>
                        <input type="password" id="signupPassword" placeholder="Create a password">
                    </div>
                    <button class="btn btn-primary" onclick="signup()">Create Account</button>
                    <button class="btn btn-secondary" onclick="showLogin()">Back to Login</button>
                </div>
            </div>
        </div>

        <!-- Main App -->
        <div class="app-container" id="appContainer">
            <!-- Sidebar -->
            <div class="sidebar" id="sidebar">
                <div class="sidebar-header">
                    <div class="user-profile">
                        <div class="avatar" id="userAvatar">U</div>
                        <span id="userName">User</span>
                    </div>
                    <div class="header-actions">
                        <button class="icon-btn" onclick="alert('New Chat')">ğŸ’¬</button>
                        <button class="icon-btn" onclick="alert('Settings')">âš™ï¸</button>
                        <button class="icon-btn" onclick="logout()">ğŸšª</button>
                    </div>
                </div>

                <div class="search-bar">
                    <input type="text" placeholder="Search contacts..." onkeyup="searchContacts(this.value)">
                </div>

                <div class="contacts-list" id="contactsList">
                    <!-- Contacts will be populated here -->
                </div>
            </div>

            <!-- Chat Area -->
            <div class="chat-area" id="chatArea">
                <div class="welcome-screen" id="welcomeScreen">
                    <div class="welcome-logo">O</div>
                    <div class="welcome-text">
                        <h2>Welcome to Oloo</h2>
                        <p>Select a contact to start chatting</p>
                    </div>
                    <div class="features">
                        <div class="feature">
                            <div class="feature-icon">ğŸ’¬</div>
                            <div class="feature-text">Light Messaging<br>Without Data</div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">ğŸ“</div>
                            <div class="feature-text">Crystal Clear<br>Voice Calls</div>
                        </div>
                        <div class="feature">
                            <div class="feature-icon">ğŸ“¹</div>
                            <div class="feature-text">HD Video<br>Calls</div>
                        </div>
                    </div>
                </div>

                <div id="chatContainer" style="display: none; height: 100%; flex-direction: column;">
                    <div class="chat-header">
                        <div class="chat-user-info">
                            <button class="icon-btn" onclick="backToContacts()" style="display: none;" id="backBtn">â—€</button>
                            <div class="contact-avatar" id="chatAvatar">A</div>
                            <div>
                                <div class="contact-name" id="chatName">Contact</div>
                                <div style="font-size: 12px; opacity: 0.8;">Online</div>
                            </div>
                        </div>
                        <div class="chat-actions">
                            <button class="icon-btn" onclick="startCall('voice')">ğŸ“</button>
                            <button class="icon-btn" onclick="startCall('video')">ğŸ“¹</button>
                            <button class="icon-btn" onclick="alert('More options')">â‹®</button>
                        </div>
                    </div>

                    <div class="messages-container">
                        <div class="hieroglyphic-bg" id="hieroglyphicBg">
                            ğ“€€ ğ“€ ğ“€‚ ğ“€ƒ ğ“€„ ğ“€… ğ“€† ğ“€‡ ğ“€ˆ ğ“€‰ ğ“€Š ğ“€‹ ğ“€Œ ğ“€ ğ“€ ğ“€ ğ“€ ğ“€‘ ğ“€’ ğ“€“ ğ“€” ğ“€• ğ“€– ğ“€— ğ“€˜ ğ“€™ ğ“€š ğ“€› ğ“€œ ğ“€ ğ“€ ğ“€Ÿ ğ“€  ğ“€¡ ğ“€¢ ğ“€£ ğ“€¤ ğ“€¥ ğ“€¦ ğ“€§ ğ“€¨ ğ“€©
                            ğ“€ ğ“ ğ“‚ ğ“ƒ ğ“„ ğ“… ğ“† ğ“‡ ğ“ˆ ğ“‰ ğ“Š ğ“‹ ğ“Œ ğ“ ğ“ ğ“ ğ“ ğ“‘ ğ“’ ğ““ ğ“” ğ“• ğ“– ğ“— ğ“˜ ğ“™ ğ“š ğ“› ğ“œ ğ“ ğ“ ğ“Ÿ ğ“  ğ“¡ ğ“¢ ğ“£ ğ“¤ ğ“¥ ğ“¦ ğ“§ ğ“¨ ğ“©
                            ğ“‚€ ğ“‚ ğ“‚‚ ğ“‚ƒ ğ“‚„ ğ“‚… ğ“‚† ğ“‚‡ ğ“‚ˆ ğ“‚‰ ğ“‚Š ğ“‚‹ ğ“‚Œ ğ“‚ ğ“‚ ğ“‚ ğ“‚ ğ“‚‘ ğ“‚’ ğ“‚“ ğ“‚” ğ“‚• ğ“‚– ğ“‚— ğ“‚˜ ğ“‚™ ğ“‚š ğ“‚› ğ“‚œ ğ“‚ ğ“‚ ğ“‚Ÿ ğ“‚  ğ“‚¡ ğ“‚¢ ğ“‚£ ğ“‚¤ ğ“‚¥ ğ“‚¦ ğ“‚§ ğ“‚¨ ğ“‚©
                            ğ“ƒ€ ğ“ƒ ğ“ƒ‚ ğ“ƒƒ ğ“ƒ„ ğ“ƒ… ğ“ƒ† ğ“ƒ‡ ğ“ƒˆ ğ“ƒ‰ ğ“ƒŠ ğ“ƒ‹ ğ“ƒŒ ğ“ƒ ğ“ƒ ğ“ƒ ğ“ƒ ğ“ƒ‘ ğ“ƒ’ ğ“ƒ“ ğ“ƒ” ğ“ƒ• ğ“ƒ– ğ“ƒ— ğ“ƒ˜ ğ“ƒ™ ğ“ƒš ğ“ƒ› ğ“ƒœ ğ“ƒ ğ“ƒ ğ“ƒŸ ğ“ƒ  ğ“ƒ¡ ğ“ƒ¢ ğ“ƒ£ ğ“ƒ¤ ğ“ƒ¥ ğ“ƒ¦ ğ“ƒ§ ğ“ƒ¨ ğ“ƒ©
                            ğ“„€ ğ“„ ğ“„‚ ğ“„ƒ ğ“„„ ğ“„… ğ“„† ğ“„‡ ğ“„ˆ ğ“„‰ ğ“„Š ğ“„‹ ğ“„Œ ğ“„ ğ“„ ğ“„ ğ“„ ğ“„‘ ğ“„’ ğ“„“ ğ“„” ğ“„• ğ“„– ğ“„— ğ“„˜ ğ“„™ ğ“„š ğ“„› ğ“„œ ğ“„ ğ“„ ğ“„Ÿ ğ“„  ğ“„¡ ğ“„¢ ğ“„£ ğ“„¤ ğ“„¥ ğ“„¦ ğ“„§ ğ“„¨ ğ“„©
                        </div>
                        <div class="ankh-symbol">â˜¥</div>
                        <div class="messages" id="messages">
                            <!-- Messages will appear here -->
                        </div>
                    </div>

                    <div class="message-input-container">
                        <button class="icon-btn" style="color: var(--deep-sky);">ğŸ˜Š</button>
                        <button class="icon-btn" style="color: var(--deep-sky);">ğŸ“</button>
                        <input type="text" class="message-input" id="messageInput" placeholder="Type a message..." onkeypress="handleKeyPress(event)">
                        <button class="send-btn" onclick="sendMessage()">â¤</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Call Modal -->
    <div class="call-modal" id="callModal">
        <div class="call-content">
            <div class="call-avatar" id="callAvatar">A</div>
            <div class="call-name" id="callContactName">Contact</div>
            <div class="call-status" id="callStatus">Calling...</div>
            <div class="call-actions">
                <button class="call-btn mute" onclick="toggleMute()">ğŸ”‡</button>
                <button class="call-btn end" onclick="endCall()">ğŸ“</button>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let currentUser = null;
        let selectedContact = null;
        let contacts = [
            { id: 1, name: 'Sarah Johnson', phone: '+254701234567', lastMessage: 'Hey! How are you?', time: '10:30 AM', online: true },
            { id: 2, name: 'David Kimani', phone: '+254702345678', lastMessage: 'See you tomorrow', time: '9:15 AM', online: true },
            { id: 3, name: 'Mary Wanjiru', phone: '+254703456789', lastMessage: 'Thanks for the help!', time: 'Yesterday', online: false },
            { id: 4, name: 'James Omondi', phone: '+254704567890', lastMessage: 'Meeting at 3 PM', time: 'Yesterday', online: true },
            { id: 5, name: 'Grace Achieng', phone: '+254705678901', lastMessage: 'Happy birthday! ğŸ‰', time: 'Monday', online: false }
        ];
        let messages = {};
        let isMuted = false;

        // Initialize the app
        function init() {
            loadContacts();
            generateSampleMessages();
        }

        // Authentication functions
        function showSignup() {
            document.getElementById('loginForm').style.display = 'none';
            document.getElementById('signupForm').style.display = 'block';
        }

        function showLogin() {
            document.getElementById('signupForm').style.display = 'none';
            document.getElementById('loginForm').style.display = 'block';
        }

        function signup() {
            const name = document.getElementById('signupName').value;
            const phone = document.getElementById('signupPhone').value;
            const password = document.getElementById('signupPassword').value;

            if (name && phone && password) {
                currentUser = { name, phone };
                document.getElementById('userName').textContent = name;
                document.getElementById('userAvatar').textContent = name.charAt(0).toUpperCase();
                
                document.getElementById('authScreen').style.display = 'none';
                document.getElementById('appContainer').classList.add('active');
            } else {
                alert('Please fill in all fields');
            }
        }

        function login() {
            const phone = document.getElementById('loginPhone').value;
            const password = document.getElementById('loginPassword').value;

            if (phone && password) {
                currentUser = { name: 'Demo User', phone };
                document.getElementById('userName').textContent = 'Demo User';
                document.getElementById('userAvatar').textContent = 'D';
                
                document.getElementById('authScreen').style.display = 'none';
                document.getElementById('appContainer').classList.add('active');
            } else {
                alert('Please enter phone and password');
            }
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                currentUser = null;
                selectedContact = null;
                document.getElementById('authScreen').style.display = 'flex';
                document.getElementById('appContainer').classList.remove('active');
                showLogin();
            }
        }

        // Contact functions
        function loadContacts() {
            const contactsList = document.getElementById('contactsList');
            contactsList.innerHTML = '';

            contacts.forEach(contact => {
                const contactEl = document.createElement('div');
                contactEl.className = 'contact-item';
                contactEl.onclick = () => selectContact(contact.id);
                
                contactEl.innerHTML = `
                    <div class="contact-avatar">${contact.name.charAt(0)}</div>
                    <div class="contact-info">
                        <div class="contact-name">${contact.name}</div>
                        <div class="contact-message">${contact.lastMessage}</div>
                    </div>
                    <div>
                        <div class="contact-time">${contact.time}</div>
                        ${contact.online ? '<div class="status-indicator"></div>' : ''}
                    </div>
                `;
                
                contactsList.appendChild(contactEl);
            });
        }

        function searchContacts(query) {
            const contactItems = document.querySelectorAll('.contact-item');
            contactItems.forEach(item => {
                const name = item.querySelector('.contact-name').textContent.toLowerCase();
                if (name.includes(query.toLowerCase())) {
                    item.style.display = 'flex';
                } else {
                    item.style.display = 'none';
                }
            });
        }

        function selectContact(contactId) {
            selectedContact = contacts.find(c => c.id === contactId);
            if (!selectedContact) return;

            // Update UI
            document.querySelectorAll('.contact-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.contact-item').classList.add('active');

            // Show chat
            document.getElementById('welcomeScreen').style.display = 'none';
            document.getElementById('chatContainer').style.display = 'flex';
            
            // Update chat header
            document.getElementById('chatName').textContent = selectedContact.name;
            document.getElementById('chatAvatar').textContent = selectedContact.name.charAt(0);
            
            // Load messages
            loadMessages(contactId);

            // Mobile responsive
            if (window.innerWidth <= 768) {
                document.getElementById('sidebar').classList.remove('mobile-active');
                document.getElementById('chatArea').classList.add('mobile-active');
                document.getElementById('backBtn').style.display = 'block';
            }
        }

        function backToContacts() {
            document.getElementById('sidebar').classList.add('mobile-active');
            document.getElementById('chatArea').classList.remove('mobile-active');
        }

        // Message functions
        function generateSampleMessages() {
            messages = {
                1: [
                    { text: 'Hey! How are you?', sent: false, time: '10:25 AM' },
                    { text: 'I\'m good, thanks! How about you?', sent: true, time: '10:26 AM' },
                    { text: 'Doing great! Want to meet up later?', sent: false, time: '10:30 AM' }
                ],
                2: [
                    { text: 'Don\'t forget about the meeting tomorrow', sent: true, time: '9:10 AM' },
                    { text: 'See you tomorrow', sent: false, time: '9:15 AM' }
                ],
                3: [
                    { text: 'Can you help me with that project?', sent: false, time: '2:30 PM' },
                    { text: 'Sure, I\'ll send you the files', sent: true, time: '2:35 PM' },
                    { text: 'Thanks for the help!', sent: false, time: '3:00 PM' }
                ],
                4: [
                    { text: 'Meeting at 3 PM', sent: false, time: '11:00 AM' },
                    { text: 'Got it, I\'ll be there', sent: true, time: '11:05 AM' }
                ],
                5: [
                    { text: 'Happy birthday! ğŸ‰', sent: false, time: '8:00 AM' },
                    { text: 'Thank you so much! ğŸ˜Š', sent: true, time: '8:30 AM' }
                ]
            };
        }

        function loadMessages(contactId) {
            const messagesContainer = document.getElementById('messages');
            messagesContainer.innerHTML = '';

            const contactMessages = messages[contactId] || [];
            
            contactMessages.forEach(msg => {
                addMessageToUI(msg.text, msg.sent, msg.time);
            });

            // Scroll to bottom
            messagesContainer.parentElement.scrollTop = messagesContainer.parentElement.scrollHeight;
        }

        function addMessageToUI(text, isSent, time) {
            const messagesContainer = document.getElementById('messages');
            const messageEl = document.createElement('div');
            messageEl.className = `message ${isSent ? 'sent' : 'received'}`;
            
            if (!time) {
                const now = new Date();
                time = now.getHours() + ':' + String(now.getMinutes()).padStart(2, '0');
            }
            
            messageEl.innerHTML = `
                <div class="message-bubble">
                    <div class="message-text">${text}</div>
                    <div class="message-time">${time}</div>
                </div>
            `;
            
            messagesContainer.appendChild(messageEl);
            messagesContainer.parentElement.scrollTop = messagesContainer.parentElement.scrollHeight;
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const text = input.value.trim();
            
            if (!text || !selectedContact) return;
            
            // Add to messages
            if (!messages[selectedContact.id]) {
                messages[selectedContact.id] = [];
            }
            
            const now = new Date();
            const time = now.getHours() + ':' + String(now.getMinutes()).padStart(2, '0');
            
            messages[selectedContact.id].push({
                text: text,
                sent: true,
                time: time
            });
            
            addMessageToUI(text, true, time);
            input.value = '';
            
            // Update contact last message
            const contact = contacts.find(c => c.id === selectedContact.id);
            if (contact) {
                contact.lastMessage = text;
                contact.time = time;
                loadContacts();
            }
            
            // Simulate response after 2 seconds
            setTimeout(() => {
                simulateResponse();
            }, 2000);
        }

        function simulateResponse() {
            if (!selectedContact) return;
            
            const responses = [
                'That sounds great!',
                'Sure, I\'ll check that out',
                'Thanks for letting me know',
                'I agree with you',
                'Let me get back to you on that',
                'Absolutely!',
                'I\'ll think about it',
                'Good idea!'
            ];
            
            const randomResponse = responses[Math.floor(Math.random() * responses.length)];
            const now = new Date();
            const time = now.getHours() + ':' + String(now.getMinutes()).padStart(2, '0');
            
            messages[selectedContact.id].push({
                text: randomResponse,
                sent: false,
                time: time
            });
            
            addMessageToUI(randomResponse, false, time);
            
            // Update contact last message
            const contact = contacts.find(c => c.id === selectedContact.id);
            if (contact) {
                contact.lastMessage = randomResponse;
                contact.time = time;
                loadContacts();
            }
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Call functions
        function startCall(type) {
            if (!selectedContact) return;
            
            const modal = document.getElementById('callModal');
            const callAvatar = document.getElementById('callAvatar');
            const callName = document.getElementById('callContactName');
            const callStatus = document.getElementById('callStatus');
            
            callAvatar.textContent = selectedContact.name.charAt(0);
            callName.textContent = selectedContact.name;
            callStatus.textContent = type === 'video' ? 'Video calling...' : 'Calling...';
            
            modal.classList.add('active');
            
            // Simulate call connection after 3 seconds
            setTimeout(() => {
                callStatus.textContent = type === 'video' ? 'Video call in progress' : 'Call in progress';
            }, 3000);
        }

        function endCall() {
            const modal = document.getElementById('callModal');
            modal.classList.remove('active');
            isMuted = false;
        }

        function toggleMute() {
            isMuted = !isMuted;
            const muteBtn = event.target;
            muteBtn.textContent = isMuted ? 'ğŸ”Š' : 'ğŸ”‡';
        }

        // Initialize on page load
        window.onload = init;

        // Handle window resize
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                document.getElementById('sidebar').classList.remove('mobile-active');
                document.getElementById('chatArea').classList.remove('mobile-active');
                document.getElementById('backBtn').style.display = 'none';
            }
        });
    </script>
</body>
</html>
